---
title: Lume
---

Lume exposes a local HTTP API server that listens on `http://localhost:7777/lume`, enabling automated management of VMs.

## Base URL

```
http://localhost:7777/lume
```

## Endpoints

<details open>
<summary><strong>Create VM</strong> - POST /vms</summary>

```bash
curl --connect-timeout 6000 \
    --max-time 5000 \
    -X POST \
    -H "Content-Type: application/json" \
    -d '{
      "name": "lume_vm",
      "os": "macOS",
      "cpu": 2,
      "memory": "4GB",
      "diskSize": "64GB",
      "display": "1024x768",
      "ipsw": "latest",
      "storage": "ssd"
    }' \
    http://localhost:7777/lume/vms
```

</details>

<details open>
<summary><strong>Run VM</strong> - POST /vms/:name/run</summary>

```bash
# Basic run
curl --connect-timeout 6000 \
  --max-time 5000 \
  -X POST \
  http://localhost:7777/lume/vms/my-vm-name/run

# Run with VNC client started and shared directory
curl --connect-timeout 6000 \
  --max-time 5000 \
  -X POST \
  -H "Content-Type: application/json" \
  -d '{
    "noDisplay": false,
    "sharedDirectories": [
      {
        "hostPath": "~/Projects",
        "readOnly": false
      }
    ],
    "recoveryMode": false,
    "storage": "ssd"
  }' \
  http://localhost:7777/lume/vms/lume_vm/run
```

</details>

<details open>
<summary><strong>List VMs</strong> - GET /vms</summary>

```bash
curl --connect-timeout 6000 \
  --max-time 5000 \
  http://localhost:7777/lume/vms
```

```json
[
  {
    "name": "my-vm",
    "state": "stopped",
    "os": "macOS",
    "cpu": 2,
    "memory": "4GB",
    "diskSize": "64GB"
  },
  {
    "name": "my-vm-2",
    "state": "stopped",
    "os": "linux",
    "cpu": 2,
    "memory": "4GB",
    "diskSize": "64GB"
  }
]
```

</details>

<details open>
<summary><strong>Get VM Details</strong> - GET /vms/:name</summary>

```bash
# Basic get
curl --connect-timeout 6000 \
  --max-time 5000 \
  http://localhost:7777/lume/vms/lume_vm

# Get with specific storage
curl --connect-timeout 6000 \
  --max-time 5000 \
  http://localhost:7777/lume/vms/lume_vm?storage=ssd
```

```json
{
  "name": "lume_vm",
  "state": "stopped",
  "os": "macOS",
  "cpu": 2,
  "memory": "4GB",
  "diskSize": "64GB",
  "display": "1024x768",
  "ipAddress": "192.168.65.2",
  "vncPort": 5900,
  "sharedDirectories": [
    {
      "hostPath": "~/Projects",
      "readOnly": false,
      "tag": "com.apple.virtio-fs.automount"
    }
  ]
}
```

</details>

<details open>
<summary><strong>Update VM Configuration</strong> - PUT /vms/:name</summary>

```bash
curl --connect-timeout 6000 \
  --max-time 5000 \
  -X PUT \
  -H "Content-Type: application/json" \
  -d '{
    "cpu": 4,
    "memory": "8GB",
    "diskSize": "100GB",
    "display": "1920x1080",
    "storage": "ssd"
  }' \
  http://localhost:7777/lume/vms/lume_vm
```

</details>

<details open>
<summary><strong>Stop VM</strong> - POST /vms/:name/stop</summary>

```bash
curl --connect-timeout 6000 \
  --max-time 5000 \
  -X POST \
  http://localhost:7777/lume/vms/lume_vm/stop
```

</details>

<details open>
<summary><strong>Delete VM</strong> - DELETE /vms/:name</summary>

```bash
# Basic delete
curl --connect-timeout 6000 \
  --max-time 5000 \
  -X DELETE \
  http://localhost:7777/lume/vms/lume_vm

# Delete with specific storage
curl --connect-timeout 6000 \
  --max-time 5000 \
  -X DELETE \
  http://localhost:7777/lume/vms/lume_vm?storage=ssd
```

</details>

<details open>
<summary><strong>Pull VM Image</strong> - POST /images/pull</summary>

```bash
curl --connect-timeout 6000 \
  --max-time 5000 \
  -X POST \
  -H "Content-Type: application/json" \
  -d '{
    "image": "macos-sequoia-vanilla:latest",
    "registry": "ghcr.io",
    "organization": "trycua",
    "storage": "ssd"
  }' \
  http://localhost:7777/lume/images/pull
```

</details>
